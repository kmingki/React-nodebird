{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { useEffect, useMemo, useState } from 'react';\nexport var useJoinRoom = function useJoinRoom(socket, id) {\n  _s();\n\n  var requestJoin = function requestJoin() {\n    socket.emit('joinRoom', id);\n    /*\r\n    return () => {\r\n        console.log(`Leave Room: ${roomId}`);\r\n        socket.emit('leaveRoom', roomId);\r\n    };\r\n    */\n  };\n\n  useEffect(requestJoin, []);\n};\n\n_s(useJoinRoom, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\nexport var useWantingRoom = function useWantingRoom(socket, userId) {\n  _s2();\n\n  var ms = useMemo(function () {\n    return socket;\n  }, [socket]);\n\n  var _useState = useState([]),\n      rooms = _useState[0],\n      setRooms = _useState[1];\n\n  var roomData = function roomData() {\n    ms.emit('roomListDataRequest', userId, function (res) {\n      setRooms(res.rooms);\n    });\n    ms.on('updateRoomList', function (room) {\n      var users = room.participants;\n      console.log('update room list'); //console.log(users);\n\n      users.forEach(function (u) {\n        if (u.id === userId) {\n          setRooms([].concat(_toConsumableArray(rooms), [room]));\n        }\n      });\n    });\n  };\n\n  useEffect(roomData, []);\n  return {\n    rooms: rooms\n  };\n};\n\n_s2(useWantingRoom, \"KORESAA+/AjxT3UmoQfEcw1GZ7M=\");","map":{"version":3,"sources":["C:/Users/User/Desktop/chatter/chatter/front/hooks/chatHooks.js"],"names":["useEffect","useMemo","useState","useJoinRoom","socket","id","requestJoin","emit","useWantingRoom","userId","ms","rooms","setRooms","roomData","res","on","room","users","participants","console","log","forEach","u"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,OAA7C;AAEA,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,EAAT,EAAgB;AAAA;;AACvC,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AAEtBF,IAAAA,MAAM,CAACG,IAAP,CAAY,UAAZ,EAAwBF,EAAxB;AAEA;AACR;AACA;AACA;AACA;AACA;AACK,GAVD;;AAYAL,EAAAA,SAAS,CAACM,WAAD,EAAc,EAAd,CAAT;AACH,CAdM;;GAAMH,W;;AAgBb,OAAO,IAAMK,cAAc,GAAG,SAAjBA,cAAiB,CAACJ,MAAD,EAASK,MAAT,EAAoB;AAAA;;AAC9C,MAAMC,EAAE,GAAGT,OAAO,CAAC;AAAA,WAAIG,MAAJ;AAAA,GAAD,EAAa,CAACA,MAAD,CAAb,CAAlB;;AAD8C,kBAEpBF,QAAQ,CAAC,EAAD,CAFY;AAAA,MAEvCS,KAFuC;AAAA,MAEhCC,QAFgC;;AAI9C,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACnBH,IAAAA,EAAE,CAACH,IAAH,CAAQ,qBAAR,EAA+BE,MAA/B,EAAuC,UAACK,GAAD,EAAS;AAC5CF,MAAAA,QAAQ,CAACE,GAAG,CAACH,KAAL,CAAR;AACH,KAFD;AAGAD,IAAAA,EAAE,CAACK,EAAH,CAAM,gBAAN,EAAwB,UAACC,IAAD,EAAQ;AAC5B,UAAMC,KAAK,GAAGD,IAAI,CAACE,YAAnB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAF4B,CAG5B;;AACAH,MAAAA,KAAK,CAACI,OAAN,CAAc,UAAAC,CAAC,EAAI;AACf,YAAIA,CAAC,CAACjB,EAAF,KAASI,MAAb,EAAqB;AACjBG,UAAAA,QAAQ,8BAAKD,KAAL,IAAYK,IAAZ,GAAR;AACH;AACJ,OAJD;AAKH,KATD;AAUH,GAdD;;AAgBAhB,EAAAA,SAAS,CAACa,QAAD,EAAW,EAAX,CAAT;AAEA,SAAO;AAAEF,IAAAA,KAAK,EAALA;AAAF,GAAP;AACH,CAvBM;;IAAMH,c","sourcesContent":["import { useEffect, useMemo, useState } from 'react';\r\n\r\nexport const useJoinRoom = (socket, id) => {\r\n    const requestJoin = () => {\r\n       \r\n        socket.emit('joinRoom', id);\r\n\r\n        /*\r\n        return () => {\r\n            console.log(`Leave Room: ${roomId}`);\r\n            socket.emit('leaveRoom', roomId);\r\n        };\r\n        */\r\n    };\r\n\r\n    useEffect(requestJoin, []);\r\n}\r\n\r\nexport const useWantingRoom = (socket, userId) => {\r\n    const ms = useMemo(()=>socket, [socket]);\r\n    const [rooms, setRooms] = useState([]);\r\n\r\n    const roomData = () => {\r\n        ms.emit('roomListDataRequest', userId, (res) => {\r\n            setRooms(res.rooms);\r\n        })\r\n        ms.on('updateRoomList', (room)=>{\r\n            const users = room.participants;\r\n            console.log('update room list')\r\n            //console.log(users);\r\n            users.forEach(u => {\r\n                if (u.id === userId) {\r\n                    setRooms([...rooms, room]);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    useEffect(roomData, []);\r\n\r\n    return { rooms }; \r\n}"]},"metadata":{},"sourceType":"module"}